(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),o=t.n(c),u=t(15),l=t(16),s=t(2),i=function(e){return r.a.createElement("div",{className:"c-filter"},r.a.createElement("h3",{className:"c-filter__heading"},"Search Contacts"),r.a.createElement("div",{className:"c-form-row"},r.a.createElement("input",{id:"filter",className:"c-form-row__input",onChange:e.handleFilterChange,value:e.value,placeholder:"Enter name..."})))},m=function(e){return r.a.createElement("div",null,r.a.createElement("form",{className:"c-person-form",onSubmit:e.handleSubmit},r.a.createElement("h3",{className:"c-person-form__heading"},"Add a New Contact"),r.a.createElement("div",{className:"c-form-row"},r.a.createElement("label",{htmlFor:"name",className:"c-form-row__label"},"Name:"),r.a.createElement("input",{id:"name",className:"c-form-row__input",onChange:e.handleNameChange,value:e.nameValue})),r.a.createElement("div",{className:"c-form-row"},r.a.createElement("label",{htmlFor:"number",className:"c-form-row__label"},"Number:"),r.a.createElement("input",{id:"number",className:"c-form-row__input",onChange:e.handleNumberChange,value:e.numberValue})),r.a.createElement("div",{className:"c-person-form__submit"},r.a.createElement("button",{className:"c-btn",type:"submit"},"Add"))))},d=function(e){return r.a.createElement("div",{className:"c-person"},r.a.createElement("span",{className:"c-person__detail"},r.a.createElement("span",{className:"u-bold"},e.name,":")),r.a.createElement("span",{className:"c-person__detail"},r.a.createElement("span",{className:"u-italic"},e.number,", ")),r.a.createElement("div",{className:"c-person__delete"},r.a.createElement("div",{className:"c-person__delete-btn"},r.a.createElement("button",{className:"c-btn c-btn--danger","data-id":e.id,onClick:e.handleClick},"Delete"))))},f=function(e){var n=e.persons,t=e.handleClick,a=n.map((function(e){return r.a.createElement(d,{key:e.id,id:e.id,name:e.name,number:e.number,handleClick:t})}));return r.a.createElement("div",{className:"c-persons"},r.a.createElement("h3",{className:"c-persons__heading"},"Contact List"),a)},b=function(e){var n=e.timeoutFunc,t=e.id,c=e.type,o=e.message,u={error:"c-alert--error",success:"c-alert--success",info:"c-alert--info"};if(!u[c])throw new Error("Invalid Alert Type");var l=function(){return n(t)};return Object(a.useEffect)((function(){setTimeout(l,3e3)})),r.a.createElement("div",{className:"c-alert ".concat(u[c])},r.a.createElement("span",{className:"c-alert__txt"},o))},p=t(3),h=t.n(p),E="/api/persons",v=function(e){return h.a.post(E,e).then((function(e){return e.data}))},N=function(){return h.a.get(E).then((function(e){return e.data}))},_=function(e,n){return h.a.put("".concat(E,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return h.a.delete("".concat(E,"/").concat(e))},w=t(14),C=t.n(w)()(1,1e4),k=function(){var e=Object(a.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),d=Object(s.a)(o,2),p=d[0],h=d[1],E=Object(a.useState)(""),w=Object(s.a)(E,2),k=w[0],O=w[1],j=Object(a.useState)(""),y=Object(s.a)(j,2),F=y[0],S=y[1],P=Object(a.useState)([]),A=Object(s.a)(P,2),V=A[0],D=A[1];Object(a.useEffect)((function(){N().then((function(e){c(e)}))}),[]);var I=t.filter((function(e){return e.name.toLowerCase().includes(F.toLowerCase())})),L=function(e,n){switch(n){case"nameFilter":S(e.target.value);break;case"name":h(e.target.value);break;case"number":O(e.target.value)}},T=function(){h(""),O("")},U=function(e){(e.preventDefault(),t.some((function(e){return e.name===p})))?function(){var e=t.find((function(e){return e.name===p}));if(window.confirm("".concat(e.name," is alrady added to the phonebook, ")+"replace the old number with a new one?")){var n=Object(l.a)({},e,{number:k}),a=e.id;return _(a,n).then((function(e){return c(t.map((function(n){return n.id!==a?n:e}))),J("info-up-".concat(C()),"info","".concat(e.name,"'s number updated to ").concat(e.number)),!0})).catch((function(n){J("error-up-".concat(C()),"error",'Contact "'.concat(e.name,'" has already been removed from server')),c(t.filter((function(e){return e.id!==a})))}))}return Promise.resolve(!1)}().then((function(e){e?console.log("Person Updated Successfully"):e||console.log("User Opted Not To Update Person"),T()})):v({name:p,number:k}).then((function(e){c(t.concat(e)),J("success-add-".concat(C()),"success",'Added "'.concat(e.name,'"'))})).catch((function(e){!function(e){var n=e.response.status,t=e.response.data.message;switch(n){case 400:case 422:J("err-cr-".concat(C()),"error",t);break;default:throw e}}(e)})).finally((function(){return T()}))},x=function(e,n){switch(n){case"deletePerson":var a=parseInt(e.target.dataset.id);if(Number.isNaN(a)||!a)break;var r=t.find((function(e){return e.id===a}));window.confirm("Delete ".concat(r.name,"?"))&&(!function(e){var n=!0;g(e).catch((function(e){console.log(e),n=!1})).finally((function(){n&&c(t.filter((function(n){return n.id!==e})))}))}(a),J("info-del-".concat(C()),"info",'Removed "'.concat(r.name,'" from contact list')))}},J=function(e,n,t){var a={timeoutFunc:function(e){return D((function(n){return n.filter((function(n){return n.id!==e}))}))},id:e,type:n,message:t};D([].concat(Object(u.a)(V),[a]))},B=V.map((function(e){return r.a.createElement(b,{timeoutFunc:e.timeoutFunc,key:e.id,id:e.id,type:e.type,message:e.message})}));return r.a.createElement("div",{className:"o-wrapper"},r.a.createElement("h2",null,"Phonebook"),B,r.a.createElement(m,{nameValue:p,numberValue:k,handleSubmit:function(e){return U(e)},handleNameChange:function(e){return L(e,"name")},handleNumberChange:function(e){return L(e,"number")}}),r.a.createElement(i,{handleFilterChange:function(e){return L(e,"nameFilter")},value:F}),r.a.createElement(f,{persons:I,handleClick:function(e){return x(e,"deletePerson")}}))};t(39);o.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.84ca8ad9.chunk.js.map